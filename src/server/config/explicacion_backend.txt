ğŸ“Œ Puntos clave de tu backend:
AutenticaciÃ³n con JWT:

Se genera un token JWT despuÃ©s de hacer login y se almacena en una cookie httpOnly.
La cookie se envÃ­a con httpOnly: true, lo que significa que el frontend no puede acceder directamente a ella con localStorage.
Middleware de autenticaciÃ³n (authMiddleware)

Verifica el token en las cookies (req.cookies.token).
Si el token es vÃ¡lido, aÃ±ade los datos del usuario (req.user) y deja pasar la peticiÃ³n.
Si no hay token o es invÃ¡lido, devuelve un 401 No autorizado.
Logout (logout)

Simplemente elimina la cookie del usuario con res.clearCookie("token", { path: "/" }).
Base de datos SQL Server (executeQuery)

Se usa MSSQL para almacenar usuarios.
ContraseÃ±as encriptadas con bcrypt.


ğŸ” Diferencia entre authController.js y userController.js
Ambos controladores gestionan informaciÃ³n de los usuarios, pero desde enfoques distintos:

1ï¸âƒ£ authController.js (AutenticaciÃ³n y SesiÃ³n)
Este controlador maneja todo lo relacionado con la autenticaciÃ³n: login, logout y recuperaciÃ³n del perfil del usuario autenticado.
El endpoint /api/auth/me usa getUserProfile() para obtener los datos del usuario autenticado en base a su token.

ğŸ“Œ Ejemplo de uso de authController.js
Login: POST /api/auth/login
Logout: POST /api/auth/logout
Obtener perfil del usuario logueado: GET /api/auth/me
Registro: POST /api/auth/register
js
Copiar
Editar
const getUserProfile = async (req, res) => {
    const query = `
        SELECT user_id, user_handle, email_address, first_name, last_name, 
               avatar_url, cover_url, last_login, user_role
        FROM users WHERE user_id = @user_id`;

    const result = await executeQuery(query, [
        { name: "user_id", type: db.Int, value: req.user.id },
    ]);

    res.json({
        user_id: user.user_id,
        user_handle: user.user_handle,
        email: user.email_address,
        name: `${user.first_name} ${user.last_name}`,
        avatarUrl: user.avatar_url || null,
        coverUrl: user.cover_url || null, // ğŸ”¥ Ahora incluye cover_url
        lastLogin: user.last_login,
        isOnline: true,
        role: user.user_role,
    });
};
2ï¸âƒ£ userController.js (InformaciÃ³n general de usuarios)
Este controlador es mÃ¡s genÃ©rico y se usa para obtener informaciÃ³n de otros usuarios, no solo del usuario autenticado.
El endpoint /api/user/:id usa getUserData() para obtener informaciÃ³n de cualquier usuario dado su user_id.

ğŸ“Œ Ejemplo de uso de userController.js
Obtener datos de cualquier usuario: GET /api/user/:id
Obtener detalles adicionales del usuario: GET /api/user/:id/details
Buscar usuarios: (si agregas un endpoint para esto)
js
Copiar
Editar
const getUserData = async (req, res) => {
    const userId = req.params.id; // ğŸ”¥ Se obtiene el ID del usuario desde la URL

    const query = `
        SELECT 
            u.first_name, 
            u.last_name, 
            u.user_handle, 
            u.avatar_url, 
            u.cover_url, 
            u.location, 
            u.date_of_birth, 
            u.email_address, 
            u.bio, 
            (SELECT COUNT(*) FROM followers WHERE following_id = @userId) AS followers,
            (SELECT COUNT(*) FROM followers WHERE follower_id = @userId) AS following
        FROM users u
        WHERE u.user_id = @userId
    `;

    const inputs = [{ name: "userId", type: db.Int, value: userId }];
    const result = await executeQuery(query, inputs);

    res.send(result.recordset[0]);
};
ğŸ“Œ Â¿CuÃ¡ndo usar cada uno?
Caso	Usar authController.js	Usar userController.js
Obtener datos del usuario autenticado (sesiÃ³n)	âœ… GET /api/auth/me	âŒ No aplica
Obtener datos de otro usuario por user_id	âŒ No aplica	âœ… GET /api/user/:id
Iniciar sesiÃ³n	âœ… POST /api/auth/login	âŒ No aplica
Cerrar sesiÃ³n	âœ… POST /api/auth/logout	âŒ No aplica
Obtener seguidores, seguidos, etc.	âŒ No aplica	âœ… GET /api/user/:id
ğŸ”§ ConclusiÃ³n
authController.js se usa para autenticaciÃ³n y datos del usuario logueado.
userController.js se usa para obtener datos de cualquier usuario.
En tu caso, el problema era que authController.js no devolvÃ­a cover_url. Solucionado agregando cover_url en getUserProfile(). ğŸš€